/*! For license information please see sw.js.LICENSE.txt */
(()=>{var t={666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:k(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var f="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function w(){}function m(){}var b={};u(b,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(q([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=m.prototype=g.prototype=Object.create(b);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=f;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=C(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?y:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=l(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function q(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return w.prototype=m,o(E,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:w,configurable:!0}),w.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},L(O.prototype),u(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(h(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=q,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:q(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},913:()=>{"use strict";try{self["workbox:core:7.0.0"]&&_()}catch(t){}},80:()=>{"use strict";try{self["workbox:routing:7.0.0"]&&_()}catch(t){}},873:()=>{"use strict";try{self["workbox:strategies:7.0.0"]&&_()}catch(t){}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{"use strict";r(666);const t={KEY:"3925b586c3206aa8b3eac6dedf3aacea",BASE_URL:"https://api.themoviedb.org/3/",BASE_IMAGE_URL:"https://image.tmdb.org/t/p/w500/",DEFAULT_LANGUAGE:"en-us",CACHE_NAME:(new Date).toISOString(),DATABASE_NAME:"movie-catalogue-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"movies",WEB_SOCKET_SERVER:"wss://movies-feed.dicoding.dev"};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(){n=function(){return r};var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),s=new N(n||[]);return a(i,"_invoke",{value:R(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d="suspendedStart",y="suspendedYield",v="executing",g="completed",w={};function m(){}function b(){}function _(){}var x={};l(x,c,(function(){return this}));var E=Object.getPrototypeOf,L=E&&E(E(A([])));L&&L!==o&&i.call(L,c)&&(x=L);var O=_.prototype=m.prototype=Object.create(x);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,r){function n(o,a,s,c){var u=p(t[o],t,a);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==e(l)&&i.call(l,"__await")?r.resolve(l.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):r.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}})}function R(e,r,n){var o=d;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===w)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?g:y,u.arg===w)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,w;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,w):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function q(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(r){if(r||""===r){var n=r[c];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(r)+" is not iterable")}return b.prototype=_,a(O,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:b,configurable:!0}),b.displayName=l(_,h,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,h,"GeneratorFunction")),t.prototype=Object.create(O),t},r.awrap=function(t){return{__await:t}},k(C.prototype),l(C.prototype,u,(function(){return this})),r.AsyncIterator=C,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new C(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(O),l(O,h,"Generator"),l(O,c,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(q),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),q(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;q(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),w}},r}function o(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,c,"next",t)}function c(t){o(a,n,i,s,c,"throw",t)}s(void 0)}))}}const a={cachingAppShell:function(t){var e=this;return i(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e._openCache();case 2:r.sent.addAll(t);case 4:case"end":return r.stop()}}),r)})))()},deleteOldCache:function(){return i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.keys();case 2:e.sent.filter((function(e){return e!==t.CACHE_NAME})).map((function(t){return caches.delete(t)}));case 4:case"end":return e.stop()}}),e)})))()},revalidateCache:function(t){var e=this;return i(n().mark((function r(){var o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,caches.match(t);case 2:if(!(o=r.sent)){r.next=6;break}return e._fetchRequest(t),r.abrupt("return",o);case 6:return r.abrupt("return",e._fetchRequest(t));case 7:case"end":return r.stop()}}),r)})))()},_openCache:function(){return i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",caches.open(t.CACHE_NAME));case 1:case"end":return e.stop()}}),e)})))()},_fetchRequest:function(t){var e=this;return i(n().mark((function r(){var o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t);case 2:if((o=r.sent)&&200===o.status){r.next=5;break}return r.abrupt("return",o);case 5:return r.next=7,e._addCache(t);case 7:return r.abrupt("return",o);case 8:case"end":return r.stop()}}),r)})))()},_addCache:function(t){var e=this;return i(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e._openCache();case 2:r.sent.add(t);case 4:case"end":return r.stop()}}),r)})))()}};r(913);class s extends Error{constructor(t,e){super(((t,...e)=>{let r=t;return e.length>0&&(r+=` :: ${JSON.stringify(e)}`),r})(t,e)),this.name=t,this.details=e}}r(80);const c=t=>t&&"object"==typeof t?t:{handle:t};class u{constructor(t,e,r="GET"){this.handler=c(e),this.match=t,this.method=r}setCatchHandler(t){this.catchHandler=c(t)}}class h extends u{constructor(t,e,r){super((({url:e})=>{const r=t.exec(e.href);if(r&&(e.origin===location.origin||0===r.index))return r.slice(1)}),e,r)}}class l{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",(t=>{const{request:e}=t,r=this.handleRequest({request:e,event:t});r&&t.respondWith(r)}))}addCacheListener(){self.addEventListener("message",(t=>{if(t.data&&"CACHE_URLS"===t.data.type){const{payload:e}=t.data,r=Promise.all(e.urlsToCache.map((e=>{"string"==typeof e&&(e=[e]);const r=new Request(...e);return this.handleRequest({request:r,event:t})})));t.waitUntil(r),t.ports&&t.ports[0]&&r.then((()=>t.ports[0].postMessage(!0)))}}))}handleRequest({request:t,event:e}){const r=new URL(t.url,location.href);if(!r.protocol.startsWith("http"))return;const n=r.origin===location.origin,{params:o,route:i}=this.findMatchingRoute({event:e,request:t,sameOrigin:n,url:r});let a=i&&i.handler;const s=t.method;if(!a&&this._defaultHandlerMap.has(s)&&(a=this._defaultHandlerMap.get(s)),!a)return;let c;try{c=a.handle({url:r,request:t,event:e,params:o})}catch(t){c=Promise.reject(t)}const u=i&&i.catchHandler;return c instanceof Promise&&(this._catchHandler||u)&&(c=c.catch((async n=>{if(u)try{return await u.handle({url:r,request:t,event:e,params:o})}catch(t){t instanceof Error&&(n=t)}if(this._catchHandler)return this._catchHandler.handle({url:r,request:t,event:e});throw n}))),c}findMatchingRoute({url:t,sameOrigin:e,request:r,event:n}){const o=this._routes.get(r.method)||[];for(const i of o){let o;const a=i.match({url:t,sameOrigin:e,request:r,event:n});if(a)return o=a,(Array.isArray(o)&&0===o.length||a.constructor===Object&&0===Object.keys(a).length||"boolean"==typeof a)&&(o=void 0),{route:i,params:o}}return{}}setDefaultHandler(t,e="GET"){this._defaultHandlerMap.set(e,c(t))}setCatchHandler(t){this._catchHandler=c(t)}registerRoute(t){this._routes.has(t.method)||this._routes.set(t.method,[]),this._routes.get(t.method).push(t)}unregisterRoute(t){if(!this._routes.has(t.method))throw new s("unregister-route-but-not-found-with-method",{method:t.method});const e=this._routes.get(t.method).indexOf(t);if(!(e>-1))throw new s("unregister-route-route-not-registered");this._routes.get(t.method).splice(e,1)}}let f;function p(t,e,r){let n;if("string"==typeof t){const o=new URL(t,location.href);n=new u((({url:t})=>t.href===o.href),e,r)}else if(t instanceof RegExp)n=new h(t,e,r);else if("function"==typeof t)n=new u(t,e,r);else{if(!(t instanceof u))throw new s("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});n=t}return(f||(f=new l,f.addFetchListener(),f.addCacheListener()),f).registerRoute(n),n}const d={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:"undefined"!=typeof registration?registration.scope:""},y=t=>{return t||(e=d.runtime,[d.prefix,e,d.suffix].filter((t=>t&&t.length>0)).join("-"));var e};function v(t,e){const r=new URL(t);for(const t of e)r.searchParams.delete(t);return r.href}class g{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}const w=new Set;function m(t){return"string"==typeof t?new Request(t):t}r(873);class b{constructor(t,e){this._cacheKeys={},Object.assign(this,e),this.event=e.event,this._strategy=t,this._handlerDeferred=new g,this._extendLifetimePromises=[],this._plugins=[...t.plugins],this._pluginStateMap=new Map;for(const t of this._plugins)this._pluginStateMap.set(t,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(t){const{event:e}=this;let r=m(t);if("navigate"===r.mode&&e instanceof FetchEvent&&e.preloadResponse){const t=await e.preloadResponse;if(t)return t}const n=this.hasCallback("fetchDidFail")?r.clone():null;try{for(const t of this.iterateCallbacks("requestWillFetch"))r=await t({request:r.clone(),event:e})}catch(t){if(t instanceof Error)throw new s("plugin-error-request-will-fetch",{thrownErrorMessage:t.message})}const o=r.clone();try{let t;t=await fetch(r,"navigate"===r.mode?void 0:this._strategy.fetchOptions);for(const r of this.iterateCallbacks("fetchDidSucceed"))t=await r({event:e,request:o,response:t});return t}catch(t){throw n&&await this.runCallbacks("fetchDidFail",{error:t,event:e,originalRequest:n.clone(),request:o.clone()}),t}}async fetchAndCachePut(t){const e=await this.fetch(t),r=e.clone();return this.waitUntil(this.cachePut(t,r)),e}async cacheMatch(t){const e=m(t);let r;const{cacheName:n,matchOptions:o}=this._strategy,i=await this.getCacheKey(e,"read"),a=Object.assign(Object.assign({},o),{cacheName:n});r=await caches.match(i,a);for(const t of this.iterateCallbacks("cachedResponseWillBeUsed"))r=await t({cacheName:n,matchOptions:o,cachedResponse:r,request:i,event:this.event})||void 0;return r}async cachePut(t,e){const r=m(t);await(0,new Promise((t=>setTimeout(t,0))));const n=await this.getCacheKey(r,"write");if(!e)throw new s("cache-put-with-no-response",{url:(o=n.url,new URL(String(o),location.href).href.replace(new RegExp(`^${location.origin}`),""))});var o;const i=await this._ensureResponseSafeToCache(e);if(!i)return!1;const{cacheName:a,matchOptions:c}=this._strategy,u=await self.caches.open(a),h=this.hasCallback("cacheDidUpdate"),l=h?await async function(t,e,r,n){const o=v(e.url,r);if(e.url===o)return t.match(e,n);const i=Object.assign(Object.assign({},n),{ignoreSearch:!0}),a=await t.keys(e,i);for(const e of a)if(o===v(e.url,r))return t.match(e,n)}(u,n.clone(),["__WB_REVISION__"],c):null;try{await u.put(n,h?i.clone():i)}catch(t){if(t instanceof Error)throw"QuotaExceededError"===t.name&&await async function(){for(const t of w)await t()}(),t}for(const t of this.iterateCallbacks("cacheDidUpdate"))await t({cacheName:a,oldResponse:l,newResponse:i.clone(),request:n,event:this.event});return!0}async getCacheKey(t,e){const r=`${t.url} | ${e}`;if(!this._cacheKeys[r]){let n=t;for(const t of this.iterateCallbacks("cacheKeyWillBeUsed"))n=m(await t({mode:e,request:n,event:this.event,params:this.params}));this._cacheKeys[r]=n}return this._cacheKeys[r]}hasCallback(t){for(const e of this._strategy.plugins)if(t in e)return!0;return!1}async runCallbacks(t,e){for(const r of this.iterateCallbacks(t))await r(e)}*iterateCallbacks(t){for(const e of this._strategy.plugins)if("function"==typeof e[t]){const r=this._pluginStateMap.get(e),n=n=>{const o=Object.assign(Object.assign({},n),{state:r});return e[t](o)};yield n}}waitUntil(t){return this._extendLifetimePromises.push(t),t}async doneWaiting(){let t;for(;t=this._extendLifetimePromises.shift();)await t}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(t){let e=t,r=!1;for(const t of this.iterateCallbacks("cacheWillUpdate"))if(e=await t({request:this.request,response:e,event:this.event})||void 0,r=!0,!e)break;return r||e&&200!==e.status&&(e=void 0),e}}class _{constructor(t={}){this.cacheName=y(t.cacheName),this.plugins=t.plugins||[],this.fetchOptions=t.fetchOptions,this.matchOptions=t.matchOptions}handle(t){const[e]=this.handleAll(t);return e}handleAll(t){t instanceof FetchEvent&&(t={event:t,request:t.request});const e=t.event,r="string"==typeof t.request?new Request(t.request):t.request,n="params"in t?t.params:void 0,o=new b(this,{event:e,request:r,params:n}),i=this._getResponse(o,r,e);return[i,this._awaitComplete(i,o,r,e)]}async _getResponse(t,e,r){let n;await t.runCallbacks("handlerWillStart",{event:r,request:e});try{if(n=await this._handle(e,t),!n||"error"===n.type)throw new s("no-response",{url:e.url})}catch(o){if(o instanceof Error)for(const i of t.iterateCallbacks("handlerDidError"))if(n=await i({error:o,event:r,request:e}),n)break;if(!n)throw o}for(const o of t.iterateCallbacks("handlerWillRespond"))n=await o({event:r,request:e,response:n});return n}async _awaitComplete(t,e,r,n){let o,i;try{o=await t}catch(i){}try{await e.runCallbacks("handlerDidRespond",{event:n,request:r,response:o}),await e.doneWaiting()}catch(t){t instanceof Error&&(i=t)}if(await e.runCallbacks("handlerDidComplete",{event:n,request:r,response:o,error:i}),e.destroy(),i)throw i}}const x={cacheWillUpdate:async({response:t})=>200===t.status||0===t.status?t:null};class E extends _{constructor(t={}){super(t),this.plugins.some((t=>"cacheWillUpdate"in t))||this.plugins.unshift(x)}async _handle(t,e){const r=e.fetchAndCachePut(t).catch((()=>{}));e.waitUntil(r);let n,o=await e.cacheMatch(t);if(o);else try{o=await r}catch(t){t instanceof Error&&(n=t)}if(!o)throw new s("no-response",{url:t.url,error:n});return o}}precacheAndRoute([{'revision':'198ee53080b1993a85db0004b9edda1d','url':'app.bundle.js'},{'revision':'4e0e34f265fae8f33b01b27ae29d9d6f','url':'app.bundle.js.LICENSE.txt'},{'revision':'3b9f91a1bd11b3e24f5a6dc056730025','url':'app.webmanifest'},{'revision':'923e1610b9d68d2445eb28d6e0f54aaa','url':'favicon.png'},{'revision':'34d9d8d646af9f294d968811da10e546','url':'icons/icon-128x128.png'},{'revision':'2dd174daa627ee198c37c9dfe8cdc34d','url':'icons/icon-144x144.png'},{'revision':'42ee3d984a8d535d697ccbb4428e8647','url':'icons/icon-152x152.png'},{'revision':'923e1610b9d68d2445eb28d6e0f54aaa','url':'icons/icon-192x192.png'},{'revision':'7f775b04df567c8d90c9bad2c89e2d81','url':'icons/icon-384x384.png'},{'revision':'f6705cd9d5d52d8483a2bf9b47cb5f60','url':'icons/icon-512x512.png'},{'revision':'1d463ddf39f394788393e31e1f0e9dbc','url':'icons/icon-72x72.png'},{'revision':'7619371082a792ebb06768c13bf094bf','url':'icons/icon-96x96.png'},{'revision':'df68421864aa63c8c8f6312a028ab1dc','url':'index.html'},{'revision':'4e0e34f265fae8f33b01b27ae29d9d6f','url':'sw.js.LICENSE.txt'}]);var L=new u((function(t){return t.url.href.startsWith("https://api.themoviedb.org/3/")}),new E({cacheName:"themoviedb-api"})),O=new u((function(t){return t.url.href.startsWith("https://image.tmdb.org/t/p/w500/")}),new E({cacheName:"themoviedb-image-api"}));p(L),p(O);var k=["./","./icons/icon-72x72.png","./icons/icon-96x96.png","./icons/icon-128x128.png","./icons/icon-144x144.png","./icons/icon-152x152.png","./icons/icon-192x192.png","./icons/icon-384x384.png","./icons/icon-512x512.png","./index.html","./favicon.png","./app.bundle.js","./app.webmanifest","./sw.bundle.js"];self.addEventListener("install",(function(t){t.waitUntil(a.cachingAppShell([].concat(k))),console.log("Service Worker: Installed"),self.skipWaiting()})),self.addEventListener("push",(function(t){console.log("Service Worker: Pushed");var e=self.registration.showNotification("Push Notification",{body:"This is a push notification",icon:"/favicon.png",image:"/icon-512x512/icon-512x512.jpg"});t.waitUntil(e)})),self.addEventListener("activate",(function(t){t.waitUntil(a.deleteOldCache())})),self.addEventListener("fetch",(function(t){t.respondWith(a.revalidateCache(t.request))}))})()})();
//# sourceMappingURL=sw.js.map